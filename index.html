<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Formulario Universitario Profesional</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { background:#f4f6f9; }
    .required::after { content:" *"; color:red; }
    header { text-align:center; margin-bottom:20px; }
    .logo { width:80px; }
    .pdf-header { text-align:center; font-weight:bold; }
  </style>
</head>
<body>
  <div class="container py-5">
    <div class="text-center mb-4">
      <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Logo_universidad.png" alt="Logo Universidad" class="logo mb-2">
      <h2>Universidad Nacional de Tecnología</h2>
      <p><strong>Formulario de Registro Universitario</strong></p>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card shadow-sm">
          <div class="card-body">
            <form id="formUniversidad" novalidate>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label required">Nombre</label>
                  <input type="text" class="form-control" name="nombre" value="Carlos" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Apellido</label>
                  <input type="text" class="form-control" name="apellido" value="Ramírez" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Cédula</label>
                  <input type="text" class="form-control" name="cedula" value="1234567890" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Teléfono</label>
                  <input type="tel" class="form-control" name="telefono" value="3001234567" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Correo electrónico</label>
                  <input type="email" class="form-control" name="correo" value="carlos.ramirez@universidad.edu.co" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Dirección</label>
                  <input type="text" class="form-control" name="direccion" value="Calle 10 #45-32, Medellín" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Programa académico</label>
                  <input type="text" class="form-control" name="programa" value="Ingeniería de Sistemas" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Facultad</label>
                  <input type="text" class="form-control" name="facultad" value="Facultad de Ingeniería" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Semestre actual</label>
                  <input type="number" class="form-control" name="semestre" min="1" max="12" value="8" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label required">Tipo de zona</label>
                  <select name="zona" class="form-select" required>
                    <option value="">-- Selecciona --</option>
                    <option selected>Urbana</option>
                    <option>Rural</option>
                  </select>
                </div>
                <div class="col-12">
                  <label class="form-label">Observaciones</label>
                  <textarea class="form-control" name="observaciones" rows="3">Estudiante destacado con promedio de 4.5, participante activo en semilleros de investigación.</textarea>
                </div>
              </div>
              <div class="mt-4 d-flex gap-2">
                <button type="submit" class="btn btn-primary">Enviar</button>
                <button type="button" class="btn btn-outline-secondary" id="btnLimpiar">Limpiar</button>
                <button type="button" class="btn btn-success ms-auto" id="btnImprimir">Imprimir Constancia</button>
              </div>
            </form>
            <div class="mt-4" id="resultadoContainer" style="display:none;">
              <h5>Datos registrados</h5>
              <pre id="resultado" class="bg-light p-3 rounded" style="white-space:pre-wrap;"></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function obtenerDatos(){
      const form = document.getElementById('formUniversidad');
      const datos = {};
      new FormData(form).forEach((v,k)=>datos[k]=v);
      return datos;
    }

    document.getElementById('formUniversidad').addEventListener('submit', e=>{
      e.preventDefault();
      const form = e.target;
      if(!form.checkValidity()){
        form.classList.add('was-validated');
        return;
      }
      const datos = obtenerDatos();
      document.getElementById('resultado').textContent = JSON.stringify(datos, null, 2);
      document.getElementById('resultadoContainer').style.display='block';
    });

    document.getElementById('btnLimpiar').addEventListener('click',()=>{
      document.getElementById('formUniversidad').reset();
      document.getElementById('resultadoContainer').style.display='none';
    });

    document.getElementById('btnImprimir').addEventListener('click',()=>{
      const datos = obtenerDatos();
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Encabezado institucional
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text('Universidad Nacional de Tecnología', 105, 20, { align: 'center' });
      doc.setFontSize(14);
      doc.text('Constancia de Registro Universitario', 105, 30, { align: 'center' });
      doc.line(20, 35, 190, 35);

      // Contenido
      doc.setFont('times', 'normal');
      let y = 50;
      doc.setFontSize(12);
      doc.text(`Se certifica que el/la estudiante ${datos.nombre} ${datos.apellido},`, 20, y); y+=8;
      doc.text(`identificado(a) con cédula No. ${datos.cedula}, inscrito(a) en el programa de`, 20, y); y+=8;
      doc.text(`${datos.programa} perteneciente a la ${datos.facultad}, cursa actualmente el semestre ${datos.semestre}.`, 20, y); y+=10;
      doc.text(`Dirección: ${datos.direccion}`, 20, y); y+=8;
      doc.text(`Teléfono: ${datos.telefono}`, 20, y); y+=8;
      doc.text(`Correo: ${datos.correo}`, 20, y); y+=10;
      doc.text(`Zona de residencia: ${datos.zona}`, 20, y); y+=10;
      doc.text(`Observaciones: ${datos.observaciones}`, 20, y, { maxWidth: 170 });
      
      y+=40;
      doc.text('______________________________', 105, y, { align: 'center' });
      doc.text('Firma del Responsable Académico', 105, y+10, { align: 'center' });
      y+=25;
      const fecha = new Date().toLocaleDateString();
      doc.text(`Fecha de emisión: ${fecha}`, 20, y);

      doc.save(`Constancia_${datos.nombre||'registro'}.pdf`);
    });
  </script>
</body>
</html>
